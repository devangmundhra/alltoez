var loginPrompt=new function(){var that=this;this.model={period:30,setVisit:function(visit){$.cookie("visit",visit,{expires:1,path:"/"})},setShowed:function(showed){$.cookie("showed",showed,{expires:1,path:"/"})},getVisit:function(){var visit=$.cookie("visit");if(visit){return new Number(visit)}return null},getShowed:function(){var showed=$.cookie("showed");if(showed){return showed=="true"}return false},isDue:function(){var visit=this.getVisit();if(visit){var difference=Date.now()-visit;return this.period*1e3<difference}return false}};this.controller={init:function(){var isLoggedIn=window.isLoggedIn;var showed=that.model.getShowed();that.view.init();if(!isLoggedIn&&!showed){var visit=that.model.getVisit();if(!visit){that.model.setVisit(Date.now());that.model.setShowed(false)}this.checkState()}},checkState:function(){if(that.model.isDue()){that.view.render();that.model.setShowed(true)}else{setTimeout(that.controller.checkState,1e3)}},renderOnAction:function(){that.view.renderOnAction()}};this.view={init:function(){var self=this;this.elem=$("#loginModal");this.elem.modal({keyboard:true,show:false});this.elemActions=$("#loginModalActions");this.elemActions.modal({keyboard:true,show:false});var doneButton=$("#done-action");var bookmarkButton=$("#bookmark-action");if(doneButton){doneButton.on("click",function(){if(!isLoggedIn){self.renderOnAction()}})}if(bookmarkButton){bookmarkButton.on("click",function(){if(!isLoggedIn){self.renderOnAction()}})}},render:function(){this.elem.modal("show")},renderOnAction:function(){this.elemActions.modal("show")}}};$(document).ready(function(){loginPrompt.controller.init()});