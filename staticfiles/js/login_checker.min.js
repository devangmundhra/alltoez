var loginPrompt=new function(){var e=this;this.model={period:30,setVisit:function(e){$.cookie("visit",e,{expires:1,path:"/"})},setShowed:function(e){$.cookie("showed",e,{expires:1,path:"/"})},getVisit:function(){var e=$.cookie("visit");return e?new Number(e):null},getShowed:function(){var e=$.cookie("showed");return e?e=="true":!1},isDue:function(){var e=this.getVisit();if(e){var t=Date.now()-e;return this.period*1e3<t}return!1}},this.controller={init:function(){var t=window.isLoggedIn,n=e.model.getShowed();e.view.init();if(!t&&!n){var r=e.model.getVisit();r||(e.model.setVisit(Date.now()),e.model.setShowed(!1)),this.checkState()}},checkState:function(){e.model.isDue()?(e.view.render(),e.model.setShowed(!0)):setTimeout(e.controller.checkState,1e3)},renderOnAction:function(){e.view.renderOnAction()}},this.view={init:function(){var e=this;this.elem=$("#loginModal"),this.elem.modal({keyboard:!0,show:!1}),this.elemActions=$("#loginModalActions"),this.elemActions.modal({keyboard:!0,show:!1});var t=$("#done-action"),n=$("#bookmark-action");t&&t.on("click",function(){isLoggedIn||e.renderOnAction()}),n&&n.on("click",function(){isLoggedIn||e.renderOnAction()})},render:function(){this.elem.modal("show")},renderOnAction:function(){this.elemActions.modal("show")}}};$(document).ready(function(){loginPrompt.controller.init()});
